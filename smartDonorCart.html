<template>
    <lightning-card title="Impact Cart" icon-name="standard:campaign">
        <div class="slds-p-around_medium">
            <template if:true={campaigns}>
                <lightning-layout multiple-rows="true">
                    <template for:each={campaigns} for:item="camp">
                        <lightning-layout-item key={camp.Id} padding="small" size="12">
                            <div class="slds-box slds-theme_default slds-m-bottom_small">
                                <div class="slds-grid slds-grid_align-spread">
                                    <div class="slds-col slds-size_1-of-2">
                                        <lightning-checkbox-label label={camp.Name}
                                            data-id={camp.Id}
                                            onchange={handleSelect}></lightning-checkbox-label>
                                    </div>
                                    <div class="slds-col slds-size_1-of-2 slds-text-align_right">
                                        <lightning-input type="number"
                                            label="Amount (INR)"
                                            data-id={camp.Id}
                                            value={amountMap[camp.Id]}
                                            onchange={handleAmountChange}
                                            min="0"
                                            step="0.01">
                                        </lightning-input>
                                    </div>
                                </div>
                                <div class="slds-text-color_weak slds-m-top_x-small">Goal: ₹{camp.Goal__c} • Raised: ₹{camp.Amount_Raised__c}</div>
                            </div>
                        </lightning-layout-item>
                    </template>
                </lightning-layout>

                <div class="slds-m-top_medium slds-grid slds-grid_align-spread">
                    <div>
                        <strong>Total:</strong> ₹{totalAmount}
                    </div>
                    <div>
                        <lightning-button variant="brand" label="Checkout" onclick={handleCheckout} disabled={isCheckoutDisabled}></lightning-button>
                    </div>
                </div>
            </template>

            <template if:true={isLoading}>
                <div class="slds-text-align_center slds-m-top_medium">
                    <lightning-spinner alternative-text="Loading"></lightning-spinner>
                </div>
            </template>

            <template if:true={error}>
                <div class="slds-text-color_error slds-m-top_medium">{error}</div>
            </template>
        </div>
    </lightning-card>
</template>
